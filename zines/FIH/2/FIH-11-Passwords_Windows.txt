|-----------------------------------------------------------------------------------------------|
|                                     Passwords Windows                                         |
|-----------------------------------------------------------------------------------------------|
| 01-02-2003 |                                                                        Parrao19  |
|-----------------------------------------------------------------------------------------------|
|                            _____ ___ _   _   _____     _                                      |
|                           |  ___|_ _| | | | | ____|___(_)_ __   ___                           |
|                           | |_   | || |_| | |  _| |_  / | '_ \ / _ \                          |
|                           |  _|  | ||  _  | | |___ / /| | | | |  __/                          |
|                           |_|   |___|_| |_| |_____/___|_|_| |_|\___|                          |
|                                      alberto18@terra.es                                       |
|                                                                                               |
|-----------------------------------------------------------------------------------------------|




En este texto voy a hablar de los archivos de password en los sistemas Windows tanto 9x, NT, 2000 como XP. Ya que 
en los 9x son distintos empezaremos hablando de estos.


FICHEROS PWL EN WINDOWS 9x

Como dice el título, los archivos de passwords en los Windows 9x tiene extensión pwl y están en el directorio Windows
(C:\Windows) el nombre que tienen es el nombre del usuario, hay que recordar que estamos en sistema FAT y si el nombre
excede de 8 caracteres sólo cogerá los 8 primeros. Ej. usuario administrador será adminis.pwl 

Este sistema de seguridad es bastante malo, ya que cuando te pedía la password si le dabas el ESC (escape) entrabas
al sistema sin problemas. Si el sistema está configurado en red y nos pide la password de red si le damos al ESC 
entramos al sistema pero no tendrémos red y no podrémos acceder a los recursos de la red. Otro error grave es que
todos los ficheros pwl los puedes copiar, cortar, mover, borrar, modificar, etc sin ningún tipo de problema, no
tienen ningún tipo de restricción y no nos darán problemas.

Con esta explicación se entiende que la seguridad en Windows 9x no es segura y nuestro sistema está al alcance de
cualquiera.

Para sacar la password de los ficheros pwl se pueden usar programas como el brutus o cain


FICHERO SAM EN NT, 2000 y XP

En el resto de Windows, el fichero que guarda las password es el fichero sam (C:\WinNT\system32\config) este es un
fichero ya algo más complicado, es un fichero que está siempre en uso, si lo intentamos modificar no nos dejará y
nos dirá que el archivo está en uso, esto se debe a algún proceso que está corriendo, no se cual es, pero seguro que 
no deja matarlo o si lo matas cascará. Cuando arrancamos el sistema y nos pide la password ya no vale lo de dar al
ESC o sabemos la password o estamos perdidos. Con esto ya podemos respirar aunque sea poco, de que nuestro sistema es
algo "más" seguro y que será más dificil de entrar en él.

En estos sistemas, al hacer la instalación podemos elegir FAT o NTFS Si instalamos NTFS será mucho mejor, ya que la
seguridad en FAT es nula y sobre todo que desde FAT no veremos NTFS (hay programas que lo permiten)

Muchos después de leer esto estaréis buscando el fichero sam y veréis que os aparecen dos sam uno en el directorio
que comenté antes y otro (puede ser que no os aparezca) en C:\WinNT\Repair El directorio Repair como la palabra 
indica es para alguna reparación, esto como dice el refrán es un arma de doble filo, proque para raparación está muy
bien pero por otro lado te lo pueden "robar" y usar malamente (puedes hacer modificacion en él, no da problemas)
Si solemos hacer disquetes de reparación, con los sistemas NT tenemos que tener cuidado donde dejamos ese disquete ya que
guarda el fichero sam también. Otro fichero interesante es el sam._ que también lo encontramos en C:\WinNT\Repair, este 
fichero está compactado y para usarlo tendriamos que expandirlo antes (comando EXPAND)

Si se nos ha estropeado la SAM y tenemos que sustituirla o bien se puede hacer con la reparación que trae Windows (es
lo más aconsejable) o hacerlo a pelo (si tenemos NTFS nos dará problemas ya que nos hace falta un disquete especial para
poder leer y modificar en NTFS desde DOS) Porque hay que usar un método de estos dos?? Por la razón de que como dije antes
el fichero SAM está bloqueado por el sistema y no nos deja hacer nada con él.

Para mayor seguridad en el sistema si pasamos la alta encriptación de 128 a nuestro sistema mejor que mejor. Otra 
recomendación sería deshabilitar el usuario administrador y crearnos otro que no se llame Admin o cosas parecidas, asi
al intruso le resultará más dificil. No es bueno tampoco tener muchos usuarios administradores (con dos o tres sería 
suficiente)

Para sacar las passwords de estos sistemas, el programa que más me gusta a mí es el LC4, es muy buen programa ya
que te da las posibilidades de sacar las password localmente, remotamente y de disquete de reparación.

No se me ocurre nada más de ficheros SAM si surgen dudas comentadlas en el foro o mandad un e-mail


NTFS

Voy a hablar un poco sobre este sistema de archivos que no mucha gente lo conoce. FAT y FAT32 (versión mejorada) es más 
rápido que NTFS pero menos seguro. Con NTFS nos permite dar nombres largos a los ficheros, crear particiones de más de 
4 GB (este es el tope en FAT), existe la MTF (tabla maestra de archivos), seguridad en los archivos y carpetas. Al
arrancar nuestro sistema, chequea los volumenes NTFS, si hay errores aplica CHKDSK directamente. Con NTFS tendrémos 
tolerancia a fallos (RAID) Desde NTFS podrémos leer FAT y FAT32. Si tenemos un sistema en FAT podrémos pasarlo a NTFS 
con la orden CONVERT, hacerlo a la inversa es "técnicamente imposible" (lo pongo entre comillas porque he oido hablar
de que es posible pero yo no lo he probado, y creo que si es posible el sistema de archivos se volvería loco)

Estos son algunos de los conceptos más a tener en cuenta, hay más pero no me voy a enrollar ya que quería sólo hacer
una pequeña introducción a este sistema de archivos, para que sonara a la gente.
