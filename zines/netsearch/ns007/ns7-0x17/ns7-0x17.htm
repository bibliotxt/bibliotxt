<HTML>
<HEAD>
<TITLE>Ripping Tutorial v1</TITLE>
</HEAD>
<BODY>

<B><FONT FACE="Verdana" SIZE=2>
<P>=-[ 0x17 ]-==================================================================
<BR>=-[ NetSearch Ezine #7 ]-====================================================
<BR>=-[ Ripping CD's DreamCast ]-================================================
<BR>=-[ por inetd ]-=============================================================
<P>
<P> Encontrareis un zip con absolutamente todo en <A HREF="http://www.lifefromthenet">http://www.lifefromthenet.com</A>

<P>1.0 Introducci&oacute;n.</P>
<P>  1.1 Preparaci&oacute;n del lector.</P>

<P>2.0 Herramientas.</P>
<P>  2.1 CDRWin</P>
<P>  2.2 GD Toc Reader.</P>
<P>  2.3 Extract</P>
<P>  2.4 Isofix</P>
<P>  2.5 Isobuster</P>

<P>3.0 Tocs de 122 minutos.</P>
<P>  3.1 Toc de datos.</P>
<P>  3.2 Toc de audio.</P>

<P>4.0 Explicaci&oacute;n del metodo.</P>
<P>  4.1 Extracci&oacute;n de la tabla de contenidos.</P>
<P>  4.2 Extracci&oacute;n de la pista de datos.</P>
<P>  4.3 Extracci&oacute;n de las pistas de audio.</P>
<P>  4.4 Extracci&oacute;n del ip.bin</P>

<P>5. Reflexiones finales.</P>
<P>  </P>

<B><P>1.0 Introducci&oacute;n.</P>
</B><P>Este metodo consiste en un "swap-trick" del estilo del que se usaba en la Saturn o en la PSX antes de que apareciese el chip, basicamente consiste en enga&ntilde;ar al dispositivo para que no se de cuenta de que hemos cambiado de cd cuando si lo hemos hecho, en nuestro caso sera el lector de CD.</P>

<P>Los GD-ROMs no son mas que CDs normales con una densidad de datos mas alta, es decir los datos estan grabados mas juntos, pero no estan hechos de ningun material</P>
<P>especial o grabados de alguna manera distinta a lo que estaria un cd-r normal, ¿como se consigue entonces el gigabyte de capacidad? facil, eliminando la correcci&oacute;n de errores y la redundancia, esto hace que para almacenar un byte de informaci&oacute;n se utilice solamente un byte de espacio en el disco.</P>

<P>Al ser los GDs discos compactos normales y corrientes, es bastante factible que un lector de CD/DVD se capaz de leerlos sin problemas como veremos mas adelante.</P>

<B><P>1.1 Preparaci&oacute;n del lector.</P>
</B><P>Para emplear este metodo necesitaremos un lector de CD-R que no nos importe romper, compra un lector de gama media que sea capaz de leer sin problemas</P>
<P>cd-rw y cds de 80 minutos, con extracci&oacute;n digital de audio, aunque esto no lo</P>
<P>he probado, un lector de DVD deberia hacerlo mejor aun, ya que el laser de un DVD</P>
<P>de autoajusta para leer diferentes formatos, el lector que estoy usando yo es un</P>
<P>Artec 50x, otro modelo que funciona es el Acer 32x.</P>

<P>Bien, una vez que nos hemos hecho con un lector, necesitamos adecuarlo, lo primero</P>
<P>que tenemos que hacer es quitarle la carcasa, tanto la placa inferior, como la carcasa superior, y liberar la bandeja si es necesario, liberar la bandeja significa quitar el</P>
<P>platico embellecedor que suelen traer algunos lectores en la parte frontal y que hace</P>
<P>de "boca" de donde entra y sale la bandeja.</P>

<P>Una vez que tengamos el lector "desnudo", retiramos el fijador magnetico que se encarga de fijar y centrar el cd dentro del lector, en el caso del Artec 50x es una chapa que atraviesa el lector de extremo a extremo con un circulo en el centro, este circulo esta imantado, bien, quitamos los tornillos y dejamos libre esta placa, que sea</P>
<P>facilmente retirable. Ya tenemos el lector preparado, no hace falta decir que debemos</P>
<P>tener acceso total a la parte superior del CD, por lo que no lo vamos a meter en una</P>
<P>bahia de 5 1/4 de nuestra minitorre.</P>

<B><P>2.0 Herramientas.</P>
</B><P>A continuaci&oacute;n voy a describir las herramientas necesarias para extraer los ficheros de</P>
<P>un GDROM, en este apartado simplemente voy a explicar un poco en que consiste cada herramienta, el uso especifico de cada una lo explicare en el momento en que tengamos que usarla.</P>

<B><P>2.1 CDRWin</P>
</B><P>Probablemente el mejor software de grabaci&oacute;n de CDs que existe, es la base del metodo, lo usaremos para leer el GDROM, utilizaremos este y no otro software para leer el GDROM debido a la opci&oacute;n de extraer sectores.</P>

<B><P>2.2 GD TOC Reader.</P>
</B><P>Este programa, creaci&oacute;n de <B>Yursoft </B>es utilizado para a partir de un ip.bin, o de una</P>
<P>imagen iso conteniendo la toc de un GDROM averiguar donde empieza y donde acaba </P>
<P>cada pista dentro del disco. De maxima utilidad.</P>

<B><P>2.3 Extract.</P>
</B><P>Con esta utilidad seremos capaces de apartir de una imagen iso, sea cual sea y su</P>
<P>toc extraer los ficheros especificados en esta ultima.</P>

<B><P>2.4 Isofix.</P>
</B><P>Esta herramienta nos sera de mucha utilidad si hemos sido capaces, caso bastante raro, de sacar una imagen completa del GDROM aunque sea en dos partes, lo que hace esta utilidad es asignar valores LBA a una imagen.</P>

<B><P>2.5 Isobuster.</P>
</B><P>Por si alguien aun no sabe lo que hace esta herramienta lo explico un poco, extrae</P>
<P>los ficheros individuales de un monton de formatos de imagen, incluidos los .iso, en </P>
<P>nuestro caso hace la misma funci&oacute;n que <B>extract</B>.</P>

<B><P>3.0 Tocs de 122 minutos.</P>
</B><P>Bien, como he explicado antes, el metodo consiste en un swap-trick, necesitamos </P>
<P>enga&ntilde;ar al lector para que se crea que lo que esta leyendo es un CD y no un GDROM,</P>
<P>un GDROM ocupa un gigabyte de informaci&oacute;n, 549150 sectores y 122 minutos, y su</P>
<P>estructura de pistas es la siguiente:</P>

<P>&#9;<B>pista de datos dummy (sectores 0-x)</P>
<P>&#9;pistas de audio (sectores x-y) (puede que no haya ninguna)</P>
<P>&#9;pista de datos validos (sectores y-549150)</P>
</B>
<P>despues de ver esta estructura de pistas, y teniendo en cuenta de que el maximo de un cdrom normal son 80 minutos, nos podemos desesperar un poco, ya que nunca llegariamos a extraer los sectores validos, donde realmente estan los datos.</P>

<P>Esto tiene soluci&oacute;n, las imagenes de <B>CloneCD</B> traen un fichero .ccd que es el equivalente a un .cue de cdrwin, es decir indica donde empieza y acaba cada pista dentro de un CD, bien este fichero es modificable con un editor de texto normal y corriente, por lo que con un poquito de inteligencia, seremos capaces de variar ciertos datos y convertir una toc de 74 minutos en una toc de 122.</P>
<P>Junto con este tutorial, se incluyen los ficheros necesarios para crear una toc de</P>
<P>datos y una toc de audio de 122 minutos, pero es interesante saber como se modifica</P>
<P>la toc para conseguirlo.</P>

<B><P>3.1 Toc de datos.</P>
</B><P>Para crear una toc de datos, necesitamos tener una imagen <B>Mode 1</B> hecha con <B>CloneCD</B>, las imagenes de <B>CloneCD</B> se componen de tres ficheros un <B>.ccd</B>, un <B>.img</B> y un <B>.sub</B>, el que nos interesa es el primero de todos, que a pesar de la extensi&oacute;n no es mas que un fichero .ini de windows, el fichero esta dividido en secci&oacute;nes, las dos primeras relativas a la versi&oacute;n del software y a la estructura del disco, y a continuaci&oacute;n tenemos tantas secciones como entradas tenga la imagen, la que nos interesa en la entrada n&uacute;mero 2 y mas concretamente el campo <B>PLBA</B> de esta entrada, debemos modificar el valor de ese campo y cambiarlo a <B>549150</B> que es el n&uacute;mero exacto de sectores que tiene un GDROM. Deberia quedar algo como esto:</P>
</FONT><FONT FACE="Courier New" SIZE=2>
<P>[Entry 2]</P>
<P>Session=1</P>
<P>Point=0xa2</P>
<P>ADR=0x01</P>
<P>Control=0x04</P>
<P>TrackNo=0</P>
<P>AMin=0</P>
<P>ASec=0</P>
<P>AFrame=0</P>
<P>ALBA=-150</P>
<P>Zero=0</P>
<P>PMin=122</P>
<P>PSec=4</P>
<P>PFrame=01</P>
<P>PLBA=549150</P>
</FONT><FONT FACE="Verdana" SIZE=2>
<P>Una vez que hayamos modificado el .ccd quemamos la imagen con <B>CloneCD</B>. Este nos advertira de que la toc de esa imag&eacute;n no es correcta y nos ofrecera la posibilidad de</P>
<P>arreglarla o mantenerla intacta, es evidente que debemos decirle que siga usando esa</P>
<P>toc sin hacer absolutamente ninguna modificaci&oacute;n sobre ella, vamos que se guarde sus fixes para otra vez.</P>

<P>Cuando hayamos estampado la imagen, ya tenemos un "cd trampa" que nos permite leer hasta el sector 549150 por lo que podremos extraer hasta el GD completo.</P>

<B><P>3.2 Toc de audio.</P>
</B><P>Evidentemente con la imagen que hemos generado en el punto anterior, solo podemos</P>
<P>extraer datos en <B>Mode 1 (2048)</B>, ahora necesitamos un "cd trampa" para extraer el </P>
<P>audio, el proceso y las modificaciones son excatamente las mismas, pero con una imagen de <B>Clone CD</B> con formato Audio.</P>

<B><P>4.0 Explicaci&oacute;n del metodo.</P>
</B><P>Una vez que tenemos las dos tocs modificadas, el cdrwin, y el resto de herramientas podemos empezar a ripear algun GD, las pruebas que yo hice las hice con el <B>DreamON 10</B> un disco de demos de los que regala SEGA. </P>

<P>Antes de nada, debemos colocar nuestro lector de manera que tengamos facil acceso</P>
<P>a &eacute;l, una vez que tenemos el sistema montado, el windows funcionando, el lector reconocido, podemos empezar el proceso.</P>

<B><P>4.1 Extracci&oacute;n de la tabla de contenidos (TOC).</P>
</B><P>Este es un paso basico para el resto del proceso, consiste en crear una imagen que contenga los 500 primeros sectores, en ellos esta contenida la TOC del GDROM, para ellos haremos lo siguiente, metemos en el lector nuestro "cd trampa" de datos, arrancamos <B>CDRWin</B>, elegimos la tercera opci&oacute;n, <B>"Extract Disc/Tracks/Sectors"</B>, le damos al boton <B>TOC </B>y leemos la tabla de contenidos del "cd trampa", mientras termina</P>
<P>de girar el CD elegimos las siguientes opciones:</P>

<P>&#9;<B>- Modo de extracci&oacute;n: </B>Select sectors.</P>
<P>&#9;- <B>Image filename: </B>la que quieras, por ejemplo <B>toc.iso</P>
<P>&#9;- File format: </B>Automatic</P>
<P>&#9;- <B>Star sector: </B>45000</P>
<P>&#9;- <B>End sector: </B>46000</P>
<P>&#9;- <B>Datatype: </B>Data Mode 1 (2048)</P>
<P>&#9;- <B>Error recovery: </B>Abort</P>
<P>&#9;- <B>Jitter Correction: </B>Auto</P>
<P>&#9;- <B>Data Speed: </B>4x</P>
<P>&#9;- <B>Audio Speed: </B>4x</P>
<P>&#9;- <B>Read Retry Count: </B>0</P>
<P>&#9;- <B>Subcode Threshold: </B>300</P>

<P>Despues de fijar estas opciones, nos deberia quedar una configuraci&oacute;n de <B>CDRWin</B> como la que se muestra en la imagen:</P>

</FONT><FONT SIZE=2><P><IMG SRC="Image9.gif" WIDTH=545 HEIGHT=476></P>
</FONT><FONT FACE="Verdana" SIZE=2>
<P>Una vez que tenemos el <B>CDRWin</B> configurado tenemos que esperar a que el lector</P>
<P>pare el motor y el cd que tenemos metido, deje de girar. Una vez que el motor ha dejado de girar retiramos la parte metalica de encima del cd que esta imantada,</P>
<P>retiramos el "cd trampa" y colocamos el GDROM que queramos leer, colocamos otra</P>
<P>vez encima el protector/fijador metalico y empezamos a extraer, si todo va bien,</P>
<P>el CD no debe hacer ruidos y al poquito tiempo debemos tener una imagen de mas o menos 2Mbs.</P>

<P>Una vez que hemos extraido la imagen con la toc debemos averiguar donde empieza y acaba cada pista para poder extraer exactamente las pistas de audio y de datos, para ello, abrimos la imagen que hemos generado con el programa <B>GD TOC Reader</B>, deberiamos ver lo siguiente:</P>

</FONT><FONT SIZE=2><P><IMG SRC="Image10.gif" WIDTH=619 HEIGHT=285></P>
</FONT><B><FONT FACE="Verdana" SIZE=2 COLOR="#ff0000">
</B></FONT><FONT FACE="Verdana" SIZE=2><P>Como vemos tenemos tres pistas, una primera pista de datos que <B>NO</B> sirve para nada, es un dummy file para obligar a los datos a que esten al final del disco, una segunda pista de audio y una pista de datos al final del disco, que es la que realmente contiene los ficheros del juego, en este caso, los sectores clave son el <B>227454</B> que es el inicio de la pista de datos y el <B>549150</B> que es final de la pista de datos y del GDROM, con estos datos ya sabemos donde empezar a extraer los datos sin temor a </P>
<P>equivocarnos.</P>
</FONT><B><FONT FACE="Verdana" SIZE=2 COLOR="#ff0000"><P>IMPORTANTE: No cambies el CD hasta que el motor no se haya parado completamente.</P>
</B></FONT><FONT FACE="Verdana" SIZE=2>
<B><P>4.2 Extracci&oacute;n de la pista de datos.</P>
</B><P>Una vez que sabemos el sector de inicio de la pista de datos, lo unico que tenemos que hacer es poner a extraer el <B>CDRWin </B>desde ese sector hasta el final del disco, no se porque, pero si la pista de datos empieza antes del sector <B>370000</B> mas o menos hay que partirla en dos trozos o el lector no sera capaz de extraerla hasta el final, en este caso partimos la imagen en un trozo que va del <B>227454 al 369999</B> y otro trozo</P>
<P>que va del <B>370000 al 549150</B>, para extraer estas dos imagenes usamos las mismas opciones que utilizamos antes para extraer la tabla de contenidos, al igual que antes, si el GDROM no hace ruidos al extraer todo va bien, si somos capaces de extraer hasta el sector 549150 ya esta casi todo hecho.</P>

<P>Tenemos dos imagenes <B>.iso</B> sin tabla de contenidos y ademas separadas, no parece un panorama muy esperanzador, esto se arregla uniendo las dos imagenes y usando como toc de la imagen resultante, la que tenemos almacenada en la primera iso que</P>
<P>extragimos, para unir ambas imagenes usamos un comando simple de <B>msdos</B>, el copy</P>
<P>de toda la vida con la siguiente sintaxis:</P>

<P>&#9;<B>copy /b trozo01.iso+trozo02.iso imagen.iso</P>
</B>
<P>despues de un ratito, tendremos una sola imagen en <B>imagen.iso</B>. Seguimos sin tener tabla de contenidos, por lo que no podemos extraer los ficheros con <B>Isobuster</B>, lo que vamos a hacer es usar la herramienta <B>extract</B> que nos permite utilizar una toc alamacenada en una imagen y aplicarsela a otra imagen, utilizamos la siguiente sintaxis:</P>

<P>&#9;<B>extract toc.iso imagen.iso 227604 (227454+150)</P>

</B><P>este comando empezara a sacar todos los ficheros de la iso que contiene la imagen</P>
<P>de datos que extragimos antes, debemos ponerle 150 sectores mas ya que <B>extract</B> no cuenta los 150 sectores de la tabla de contenidos.</P>

<P>Cuando termine de ejecutarse <B>extract</B> debemos tener una carpeta con todos los ficheros del GDROM, en la imagen se ve la carpeta resultante de la extracci&oacute;n de los</P>
<P>ficheros del <B>DreamON10.</P>
</B>
</FONT><FONT SIZE=2><P><IMG SRC="Image11.gif" WIDTH=775 HEIGHT=662></P>
</FONT><FONT FACE="Verdana" SIZE=2>
<P>Ya esta, ya hemos sacado todos los ficheros del GDROM, solo nos quedan, en caso de </P>
<P>que las hubiese las pistas de audio, el proceso es si cabe mas sencillo aun que la pista</P>
<P>de datos.</P>

<B><P>4.3 Extracci&oacute;n de las pistas de audio.</P>
</B><P>Una vez que tenemos los datos del GD que estemos rippeando, podemos empezar a sacar las pistas de audio, para ello, necesitamos apuntarnos, donde empieza y donde acaba cada pista de audio, usando el <B>GD TOC Reader</B>, una vez que tenemos el inicio y el final de todas las pistas de audio, podemos empezar a extraerlas, para ello, tenemos que usar el "cd trampa" de audio, sacamos el GDROM, metemos el "cd trampa" de audio y el decimos al <B>CDRWin</B> que lea la tabla de contenidos, cuando el lector pare el motor y el cd se haya parado completamente, cambiamos el "cd trampa" por el GDROM de nuevo y cambiamos las siguientes opciones en el <B>CDRWin</B>:</P>

<P>&#9;- <B>File Format: </B>WAVE</P>
<P>&#9;- <B>Jitter correction: </B>Auto</P>
<P>&#9;- <B>Datatype:</B> Audio (2352)</P>

<P>Ponemos los sectores de cada pista y vamos extrayendo las pistas de forma individual, cuando terminemos tendremos tantos ficheros .wav como pistas de audio hubiese en el GDROM.</P>

<B><P>4.4 Extracci&oacute;n del ip.bin.</P>
</B><P>Casi hemos terminado, en este punto solo nos queda extraer el <B>ip.bin</B>, este fichero es la secuencia de arranque (bootstrap) de todos los juegos de Dreamcast, indica que fichero es el primero que se tiene que ejecutar, la compatibilidad de mandos y modos de video, fabricante del juego y alguna cosilla mas, este fichero es indispensable  para el funcionamiento de cualquier juego de Dreamcast, si tenemos suerte, el fichero aparte de estar insertado en el arranque del juego, se encontrara como un fichero mas dentro de los que hemos extraido anteriormente, si no, tendremos que extraerlo.</P>

<P>Aunque no es la funci&oacute;n principal de <B>isofix</B> este programa al ser aplicado sobre la imagen que contiene la toc del juego, nos extrae el <B>ip.bin</B> a un fichero llamado </P>
<B><P>boot.bin</B>, cuando arrancamos este programa, nos pregunta dos cosas, en primer lugar, la imagen que queremos parchear, y en segundo lugar, el valor LBA desde el que tiene que empezar a parchear, este ultimo es el <B>45000</B>, cuando termine de ejecutarse <B>isofix</B> tendremos dos ficheros, un tmp.iso que no nos interesa y un <B>boot.bin</B>, que debemos renombrar a <B>ip.bin</B> y usarlo como secuencia de arranque del</P>
<P>CD que vayamos a estampar.</P>

<B><P>5. Reflexiones finales.</P>
</B><P>¿Ya esta?, ¿Hemos acabado?, ¿Ya somos 31337?, no, solo hemos acabado la parte mas facil, la de extraer de un GDROM sus datos, ahora queda mucho por delante, probablemente los datos ocupen mas de un CD de 80 minutos, por lo que tendremos que bajar de calidad el video y el audio, una vez que hayamos conseguido esto, aun nos queda hacer un CD autobootable usando el <B>ip.bin</B> que extragimos, en otra ocasi&oacute;n y cuando tenga ganas, ampliare este tutorial con mas informaci&oacute;n.</P></FONT></BODY>
</HTML>
